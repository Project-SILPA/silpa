<html>
  <head>
    <script type="text/javascript">
    function rendercontent(form)
    {
    $('#progress').html("Please Wait..");
    $('#result').html("");
    var text= form.text.value;
    var width= form.width.value;
    var height= form.height.value;
    var jsonRequest = {
         "method" :  "modules.Render.render_image",
         "params" : [text,width,height], 
         "id" : ""
    };
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "JSONRPC",
        data: $.toJSON(jsonRequest), 
        dataType: "json",
        success: function(msg) {
            var resultobj =eval( '(' + msg.result + ')');
            
            $('#progress').html("");
            var resulthtml="<img src='"+ resultobj+"' style='border:solid;border-width:2px;' />";
            $('#result').html(resulthtml);
        },
        error: function(msg) { alert(msg); }
    });
    return false;
   }	  
   $(document).ready(function() {
    $('#format' ).change(function(){
		alert("Only PNG Image implemented now.");
	});
	
	$('#fontsize' ).change(function(){
		alert("Not implemented");
	});
    $('#fontcolor' ).change(function(){
		alert("Not implemented.");
	});  
	});
    
    function renderpdf(form){
        $('#pdfprogress').html("Please Wait..");
    $('#result').html("");
    var url= form.wikiurl.value;
    var jsonRequest = {
         "method" :  "modules.Render.wiki2pdf",
         "params" : [url], 
         "id" : ""
    };
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "JSONRPC",
        data: $.toJSON(jsonRequest), 
        dataType: "json",
        success: function(msg) {
            var resultobj =eval( '(' + msg.result + ')');
            
            $('#pdfprogress').html("");
            alert(resultobj);
            var resulthtml= "<a href= '" + resultobj+"' target='_new'>Open or Download PDF</a>";
            $('#pdfresult').html(resulthtml);
        },
        error: function(msg) { alert("An Error occured!"); }
    });
    return false;
    }    
    </script>
  </head>
  <body>
        <h2>Script Renderer </h2></hr>
        <p>This is an <b>experimental</b> online service based on <a href="https://savannah.nongnu.org/projects/pypdflib">pypdflib library</a> in development</p>
        <h3>Generate PDF of a wiki page</h3>
        <form id="wiki2pdfform" action="" method="post"  onsubmit="return renderpdf(this); " >
            Wiki URL: <input type="text" name="wikiurl" value="http://ml.wikipedia.org/wiki/Mango"  style="width:30em;"/>
            <input  type="submit" id="Render" value="Convert to PDF"  name="action" style="width:10em;"/>
            <div id="pdfprogress"/>
            <div id="pdfresult"/>
        </form>
        
        <h3>Convert Text to Image</h3>
        <form action="" method="post"  onsubmit="return rendercontent(this); " >
        <textarea  name='text' id='id1'></textarea>
         Width: <input type="text"  name="width" value="600" style="width:5em;"/>
         Height: <input type="text"  name="height" value="800" style="width:5em;"/>
         Font Size: <input type="text"  name="fontsize"  id="fontsize" value="10" style="width:5em;"/>
         Font Color: <select id="fontcolor">
			 <option value="Black">Black</option>
			 <option value="Blue">Blue</option>
			 <option value="Red">Red</option>
			 <option value="Yellow">Yellow</option>
			 <option value="Green">Green</option>
         </select>
         Output Format: <select id="format">
			 <option value="png">PNG Image</option>
			 <option value="svg">SVG Image</option>
			 <option value="pdf">PDF</option>
			 </select>
		 <p align=center>
			<input  type="submit" id="Render" value="Render"  name="action" style="width:5em;"/>
         </p>	 
         </br>
        </form>
       <div id="progress"></div>
        <div id="successmessage"></div>
        <div id="errormessage"></div>
        <div id="result"></div>
    </body>
</html>
