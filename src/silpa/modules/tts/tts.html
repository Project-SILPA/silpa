<html>
  <head>
    <script type="text/javascript">
    function speak(form)
    {
    $('#progress') .html("Please Wait...");
    $('#result').html("");
    var text= form.text.value;
    var pitch= form.pitch.value;
    var speed= form.speed.value;
    var jsonRequest = {
            "method" :  "modules.TTS.text_to_speech",
            "params" : [text, pitch, speed],
            "id" : ""
        };
    
    $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "JSONRPC",
            data: $.toJSON(jsonRequest), 
            dataType: "json",
            success: function(msg) {
                var resultobj =  msg.result 
                
                $('#progress').html("");

                var resulthtml="<p><audio src='"+ resultobj+"'  controls='true'>";
                resulthtml+="Your browser does not support the audio element.";
                resulthtml+="</audio></p>";
                resulthtml+="<p><a href='"+resultobj+"'>Download the speech file.</a></p>";
                $('#result').html(resulthtml);
            },
            error: function(msg) { alert("An error occured while converting text to speech."); }
        });
        return false;
        
    }
    </script>
  </head>
  <body>

        <h2>Text to Speech</h2></hr>
        <p>Online version of <a href="http://dhvani.sourceforge.net">Dhvani</a> Indian Language text to speech system. Note that this module is experimental</p>
        <p>Enter the text in any Indic language in the below text area. The text can be in multiple languages. English is not suported here.</p>
        <form action="" method="post"  onsubmit="return speak(this); " >
        <textarea  name='text' id='id1'></textarea>
         Pitch: <input type="text"  name="pitch" value="0"  style="width:2em;"/>
         Speed: <input type="text"  name="speed" value="0"  style="width:2em;"/>
         <!--Output format: <select id="format" name="format" style="width:5em;">
         <option value="ogg">Ogg</option>
         <option value="wave">Wave</option>
         </select> -->
         <input  type="submit" id="Speak" value="Speak"  name="action" style="width:5em;"/>
        
        </br>
        </form>
               
               
       <div id="progress"></div>
        <div id="successmessage"></div>
        <div id="errormessage"></div>
        <div id="result"></div>
        <p>The output is in OGG audio format.  Most of the modern browsers are capable of playing it. If your browser is not able to play it, download the audio and play with your desktop audio player.</p>
        <p>Please do not link to the audio file generated by this tool. The audio files are not stored permanently in server.</p>
    </body>
</html>
